# OHW5nfs
Repository for Otus Linadmin Prof HomeWork #5 on Network FileSystem 


Файлы и каталоги репозитория:

.gitignore - служебный текстовый файл git, перечисляет шаблоны имён файлов, не участвующих в обновлении репозитория;
README.md - настоящий файл, описывает содержимое репозитория и действий по выполннению задания;
Методичка_для_выполнения_ДЗ_Стенд_Vagrant_с_NFS_1-234533-fbbc53.pdf - методичка с описанием последовательности действий, приводящих к целевому результату;

Vagrantfile - создаёт стенд, инициализирует машины в соответствии с заданием.

nfss_script.sh

Скрипт инициализации сервера. 

Сначала устанавливаются nfs утилиты

Далее подготавливаются и запускаются nfs-server и firewall

Потом создаются и экспортируются директории с разными правами доступа. Группа владельца - nfsnobody/

В заключение демонстрируются разшаренные директории с адресом возможного клиента.

И совсем в конце готовится файл в директории с правами "только чтение" для тестирования.


nfsc_script.sh

Скрипт инициализации клиента, начинается с установки  утилит.

Далее формируются два маунт-юнита для systemd

Запускается файрвол, маунт-юниты активируются.

Пользователь vagrant включается в группу nfsnobody

В заключение скрипта создаётся скрипт для тестирования стенда и машина отправляется на перезагрузку.


После перезагрузки нужно:

зайти на клиента командой vagrant ssh nfsc

запустить тестовый скрипт:

    /bin/bash /home/vagrant/testscript.sh

Признак правильной работы - дважды повторяется фраза 'true working nfs', после чего происходят две ошибки - при попытке записи файла в директорий только для чтения и при  попытке прочитать отсутствующий файл.




